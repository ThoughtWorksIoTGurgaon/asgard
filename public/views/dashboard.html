<div ng-init="loadAppliances()">
  <div class="row-fluid">       
    <div class="span4">
      <h1>Appliances</h1>
    </div>
  </div>
  <div class="row-fluid" ng-show="appliances.length > 0">
    <div class="span4">
      <accordion class="accordion" close-others="oneAtATime" >
      <div ng-model ="devices" class="accordion">
        <div accordion-group ng-repeat="appliance in appliances" class="indent panel" is-open="status">
          <accordion-heading>
          {{appliance.title}}
          <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status, 'glyphicon-chevron-right': !status}"></i>
          </accordion-heading>
          <div>
            <div>Description: {{appliance.description}}</div>
              <div class="indent">
                <h3>Controls</h3>
                <ul class="list-unstyled indent">
                  <li ng-repeat="service in appliance.services">
                    <toggle-button service="service" ng-if="service.widget == 'toggle-button'"></toggle-button>
                    <range-slider service="service" ng-if="service.widget == 'range-slider'"></range-slider>
                    <text-label service="service" ng-if="service.widget == 'text-label'"></text-label>
                  </li>
                </ul>
              </div>
          </div>  
        </div>
      </div>
      </accordion>
    </div>
  </div>
  <div ng-hide="appliances.length > 0">
    No appliances found
  </div>
</div>
